<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Select the best covariates to fit a model • SDMSelect</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Select the best covariates to fit a model">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SDMSelect</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Covar_Selection.html">Select the best covariates to fit a model</a>
    </li>
    <li>
      <a href="../articles/SDM_Selection.html">Species distribution model selection</a>
    </li>
    <li>
      <a href="../articles/TODO.html">To do list for dev</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/statnmap/SDMSelect">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Select the best covariates to fit a model</h1>
                        <h4 class="author">StatnMap - Sébastien Rochette</h4>
            
            <h4 class="date">2020-03-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/statnmap/SDMSelect/blob/master/vignettes/Covar_Selection.Rmd"><code>vignettes/Covar_Selection.Rmd</code></a></small>
      <div class="hidden name"><code>Covar_Selection.Rmd</code></div>

    </div>

    
    
<div id="outlines" class="section level2">
<h2 class="hasAnchor">
<a href="#outlines" class="anchor"></a>Outlines</h2>
<p>This library has been created for model selection to predict species distribution (Biomass, density or presence/absence). Its final aim is to produce maps of predicted distributions. However, the core is a k-fold cross-validation model selection procedure that can be applied to any kind of model, provided that parameters of the selection are well defined. We use the classical <code>cars</code> dataset to show the different possibilities of the library. The variable of interest is <code>mpg</code>. This is a continuous numerical variable, <strong>only positive</strong>. This is in accordance with our data modelling case <code>datatype = "ContPosNull"</code> (continuous positive or null) and the model types associated (<code>modeltypes</code>). For other types of data, refer to the documentation (in particular, options in <code>modelselect_opt</code>) to correctly set your modelling parameters.<br><em>Note that most figures of the vignette are saved in “inst” so that model selection is not run during vignette building. However, code in the vignettes can be run on your own computer and should return the same outputs. To do so, open and run this Rmd file: /tmp/RtmpyL3z0I/temp_libpath1a8d32481908/SDMSelect/Covar_Selection/Covar_Selection.Rmd.</em></p>
</div>
<div id="load-libraries-and-other-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#load-libraries-and-other-setup" class="anchor"></a>Load libraries and other setup</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(SDMSelect)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">50</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Temp directory for saving all outputs</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">tmpdir &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">"/out_CovarSelection"</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span>(tmpdir)</a></code></pre></div>
</div>
<div id="dataset" class="section level2">
<h2 class="hasAnchor">
<a href="#dataset" class="anchor"></a>Dataset</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">data &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span>(mtcars, <span class="dv">8</span><span class="op">:</span><span class="dv">11</span>, as.character)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">mpg</th>
<th align="right">cyl</th>
<th align="right">disp</th>
<th align="right">hp</th>
<th align="right">drat</th>
<th align="right">wt</th>
<th align="right">qsec</th>
<th align="left">vs</th>
<th align="left">am</th>
<th align="left">gear</th>
<th align="left">carb</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.620</td>
<td align="right">16.46</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.875</td>
<td align="right">17.02</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">22.8</td>
<td align="right">4</td>
<td align="right">108</td>
<td align="right">93</td>
<td align="right">3.85</td>
<td align="right">2.320</td>
<td align="right">18.61</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">21.4</td>
<td align="right">6</td>
<td align="right">258</td>
<td align="right">110</td>
<td align="right">3.08</td>
<td align="right">3.215</td>
<td align="right">19.44</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="right">18.7</td>
<td align="right">8</td>
<td align="right">360</td>
<td align="right">175</td>
<td align="right">3.15</td>
<td align="right">3.440</td>
<td align="right">17.02</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">18.1</td>
<td align="right">6</td>
<td align="right">225</td>
<td align="right">105</td>
<td align="right">2.76</td>
<td align="right">3.460</td>
<td align="right">20.22</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">1</td>
</tr>
</tbody>
</table>
</div>
<div id="modify-the-dataset-to-work-with-the-library" class="section level2">
<h2 class="hasAnchor">
<a href="#modify-the-dataset-to-work-with-the-library" class="anchor"></a>Modify the dataset to work with the library</h2>
<p>In this case, this only consists in changing observation column name to <code>dataY</code> and append factor column names with <code>factor_</code> for compatibility with following functions.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">data.new &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Prepare_dataset.html">Prepare_dataset</a></span>(</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  <span class="dt">x =</span> data, <span class="dt">var =</span> <span class="dv">1</span>, <span class="dt">cov =</span> <span class="dv">2</span><span class="op">:</span><span class="kw"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span>(data),</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  <span class="dt">datatype =</span> <span class="st">"Cont"</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">)</a></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">dataY</th>
<th align="right">cyl</th>
<th align="right">disp</th>
<th align="right">hp</th>
<th align="right">drat</th>
<th align="right">wt</th>
<th align="right">qsec</th>
<th align="left">factor_vs</th>
<th align="left">factor_am</th>
<th align="left">factor_gear</th>
<th align="left">factor_carb</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.620</td>
<td align="right">16.46</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">4</td>
</tr>
<tr class="even">
<td align="right">21.0</td>
<td align="right">6</td>
<td align="right">160</td>
<td align="right">110</td>
<td align="right">3.90</td>
<td align="right">2.875</td>
<td align="right">17.02</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">22.8</td>
<td align="right">4</td>
<td align="right">108</td>
<td align="right">93</td>
<td align="right">3.85</td>
<td align="right">2.320</td>
<td align="right">18.61</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">21.4</td>
<td align="right">6</td>
<td align="right">258</td>
<td align="right">110</td>
<td align="right">3.08</td>
<td align="right">3.215</td>
<td align="right">19.44</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="right">18.7</td>
<td align="right">8</td>
<td align="right">360</td>
<td align="right">175</td>
<td align="right">3.15</td>
<td align="right">3.440</td>
<td align="right">17.02</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">18.1</td>
<td align="right">6</td>
<td align="right">225</td>
<td align="right">105</td>
<td align="right">2.76</td>
<td align="right">3.460</td>
<td align="right">20.22</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">3</td>
<td align="left">1</td>
</tr>
</tbody>
</table>
</div>
<div id="covariates-correlation" class="section level2">
<h2 class="hasAnchor">
<a href="#covariates-correlation" class="anchor"></a>Covariates correlation</h2>
<p>Due to identifiability issues, highly correlated environmental covariates should not be included in the same models. Correlations between all possible pairs of covariates are tested using the Spearman’s rho coefficient. Here, a rho value exceeding 0.7 considers covariates too correlated to be included in the same model. However, the following cross-validation procedure also guarantees too correlated covariates not to be included in the same models as gain in prediction may be low. Thus, the present covariates correlation selection step mainly allows the number of tested models to be reduced.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">corSpearman &lt;-<span class="st"> </span><span class="kw"><a href="../reference/Param_corr.html">Param_corr</a></span>(</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="dt">x =</span> data.new, <span class="dt">rm =</span> <span class="dv">1</span>, <span class="dt">thd =</span> <span class="fl">0.7</span>, <span class="dt">visual =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  <span class="dt">plot =</span> <span class="ot">TRUE</span>, <span class="dt">saveWD =</span> tmpdir, <span class="dt">img.size =</span> <span class="dv">5</span>)</a></code></pre></div>
<div class="figure" style="text-align: center">
<img src="Covariate_correlation_crop.png" alt="Correlation between covariates" width="50%"><p class="caption">
Correlation between covariates
</p>
</div>
</div>
<div id="find-the-best-combination-of-covariates" class="section level2">
<h2 class="hasAnchor">
<a href="#find-the-best-combination-of-covariates" class="anchor"></a>Find the best combination of covariates</h2>
<p>Set options for presence-absence models. Have a look at options documentation <code><a href="../reference/modelselect_opt.html">?modelselect_opt</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/modelselect_opt.html">modelselect_opt</a></span>(<span class="dt">RESET =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">modelselect_opt<span class="op">$</span>Max_nb_Var &lt;-<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">modelselect_opt<span class="op">$</span>datatype &lt;-<span class="st"> "ContPosNull"</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">modelselect_opt<span class="op">$</span>modeltypes &lt;-<span class="st"> </span>modelselect_opt<span class="op">$</span>modeltypes[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">11</span>)]</a></code></pre></div>
<p>Procedure selects combination of covariates in each iteration from one covariate to the maximum defined (modelselect_opt(“Max_nb_Var”) = 5). This reproduces the procedure separately for all model types defined (modelselect_opt(“modeltypes”) = LogContGLM, GammaGLMns, Cont). Here, for the example, I only run the model for three “modeltypes” (LogContGLM, NA, NA).<br>
The output of <code>findBestModel</code> function is the link to a zipped file of all outputs saved in the <code>saveWD</code> directory.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">res.file &lt;-<span class="st"> </span><span class="kw"><a href="../reference/findBestModel.html">findBestModel</a></span>(</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  <span class="dt">x =</span> data.new, <span class="dt">datatype =</span> <span class="st">"ContPosNull"</span>, </a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  <span class="dt">corSpearman =</span> corSpearman, <span class="dt">saveWD =</span> tmpdir, </a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="dt">verbose =</span> <span class="dv">1</span>)</a></code></pre></div>
</div>
<div id="order-models-according-to-quality-of-prediction" class="section level2">
<h2 class="hasAnchor">
<a href="#order-models-according-to-quality-of-prediction" class="anchor"></a>Order models according to quality of prediction</h2>
<p>Model selection was realised separately for each distribution tested. The exact same k-fold cross-validation datasets have been used to keep the best model at each step of the iteration procedure. All indices of goodness of fit can thus be compared among the distributions tested with paired statistical tests. This allows to order all models tested.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">BestModels &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ModelOrder.html">ModelOrder</a></span>(<span class="dt">saveWD =</span> res.file, <span class="dt">plot =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>Two tables are available:</p>
<ul>
<li>“VeryBestModels_crossV” retains the best model and the ones not significantly worse than the first one.</li>
</ul>
<table class="table">
<thead><tr class="header">
<th align="right">Num</th>
<th align="left">model</th>
<th align="right">Mean_RMSE_crossV</th>
<th align="right">AIC</th>
<th align="left">modeltype</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">5</td>
<td align="left">log(dataY) ~ poly(wt,2) + qsec</td>
<td align="right">2.30</td>
<td align="right">144</td>
<td align="left">LogContGLM</td>
</tr>
<tr class="even">
<td align="right">21</td>
<td align="left">dataY ~ ns(wt, df=2) + qsec</td>
<td align="right">2.30</td>
<td align="right">145</td>
<td align="left">GammaGLMns</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">log(dataY) ~ wt + poly(qsec,2) + factor_gear</td>
<td align="right">2.31</td>
<td align="right">146</td>
<td align="left">LogContGLM</td>
</tr>
</tbody>
</table>
<ul>
<li>“BestForModeltypes” retains the first two best models of each “modeltype”.</li>
</ul>
<table class="table">
<thead><tr class="header">
<th align="right">Num</th>
<th align="left">model</th>
<th align="right">Mean_RMSE_crossV</th>
<th align="right">AIC</th>
<th align="left">modeltype</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">37</td>
<td align="left">dataY ~ s(wt,k=5) + s(qsec,k=5)</td>
<td align="right">2.44</td>
<td align="right">148</td>
<td align="left">Cont</td>
</tr>
<tr class="even">
<td align="right">41</td>
<td align="left">dataY ~ s(wt,k=5) + s(qsec,k=5) + factor_gear</td>
<td align="right">2.60</td>
<td align="right">149</td>
<td align="left">Cont</td>
</tr>
<tr class="odd">
<td align="right">21</td>
<td align="left">dataY ~ ns(wt, df=2) + qsec</td>
<td align="right">2.30</td>
<td align="right">145</td>
<td align="left">GammaGLMns</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="left">dataY ~ ns(wt, df=2) + ns(qsec, df=2)</td>
<td align="right">2.33</td>
<td align="right">146</td>
<td align="left">GammaGLMns</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">log(dataY) ~ poly(wt,2) + qsec</td>
<td align="right">2.30</td>
<td align="right">144</td>
<td align="left">LogContGLM</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="left">log(dataY) ~ wt + poly(qsec,2) + factor_gear</td>
<td align="right">2.31</td>
<td align="right">146</td>
<td align="left">LogContGLM</td>
</tr>
</tbody>
</table>
</div>
<div id="predictions-of-the-best-model" class="section level2">
<h2 class="hasAnchor">
<a href="#predictions-of-the-best-model" class="anchor"></a>Predictions of the best model</h2>
<p>We can choose one model, the best one here, and create a set of figure outputs to explore what it is predicting. Figures are saved in <code>saveWD</code> and its compressed version (its path is the output of the function, here stored in <code>res.file</code>)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">Num.Best &lt;-<span class="st"> </span>BestModels<span class="op">$</span>VeryBestModels_crossV<span class="op">$</span>Num[<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">res.file &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ModelResults.html">ModelResults</a></span>(<span class="dt">saveWD =</span> tmpdir, <span class="dt">plot =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb8-3" data-line-number="3">                 <span class="dt">Num =</span> Num.Best, <span class="dt">Marginals =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>In the case of a model with positive values as here, the outputs are the following. <em>If the best model is with a log-transformation, figures are mainly created in the log-scale</em></p>
<ul>
<li><p>Analysis of variance. Deviance explained by each covariate when added sequentially in the order specified by the cross-validation procedure. “%Exp.Dev” stands for percentage of explained deviance. “RMSE” is the root mean squared error on the validation datasets as issued from the cross-validation procedure, “&gt;Diff” being the difference of RMSE with the previous step.<br><img src="Param_Exp_Deviance.png" width="90%" style="display: block; margin: auto;"></p></li>
<li><p>Residuals analysis<br><img src="Residual-Analysis.png" width="75%" style="display: block; margin: auto;"></p></li>
<li><p>Marginal predictions by covariates. These are simplified marginal effects of each covariate in the range of observations. All covariates values except one have been fixed so that their combination give a prediction close to the mean of observations. These simplified marginals figures are to be read for their relative effect and not for their absolute prediction.<br><img src="CovForMeanPred_Marginals.png" width="75%" style="display: block; margin: auto;"></p></li>
<li><p>Comparison of predictions against observations<br><img src="Obs-Pred.png" width="75%" style="display: block; margin: auto;"></p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#outlines">Outlines</a></li>
      <li><a href="#load-libraries-and-other-setup">Load libraries and other setup</a></li>
      <li><a href="#dataset">Dataset</a></li>
      <li><a href="#modify-the-dataset-to-work-with-the-library">Modify the dataset to work with the library</a></li>
      <li><a href="#covariates-correlation">Covariates correlation</a></li>
      <li><a href="#find-the-best-combination-of-covariates">Find the best combination of covariates</a></li>
      <li><a href="#order-models-according-to-quality-of-prediction">Order models according to quality of prediction</a></li>
      <li><a href="#predictions-of-the-best-model">Predictions of the best model</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sébastien Rochette.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
